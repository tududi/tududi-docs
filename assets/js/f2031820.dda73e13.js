"use strict";(globalThis.webpackChunktududi_docs=globalThis.webpackChunktududi_docs||[]).push([[697],{8138:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>o,frontMatter:()=>d,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"guides/database-setup","title":"Database Setup","description":"Configure and manage your Tududi database.","source":"@site/docs/guides/database-setup.md","sourceDirName":"guides","slug":"/guides/database-setup","permalink":"/guides/database-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/tududi/tududi-docs/tree/master/docs/guides/database-setup.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2}}');var a=s(4848),t=s(8453);const d={sidebar_position:2},r="Database Setup",l={},u=[{value:"Database Options",id:"database-options",level:2},{value:"SQLite (Default)",id:"sqlite-default",level:3},{value:"PostgreSQL (Optional)",id:"postgresql-optional",level:3},{value:"SQLite Setup",id:"sqlite-setup",level:2},{value:"Custom Location",id:"custom-location",level:3},{value:"PostgreSQL Setup",id:"postgresql-setup",level:2},{value:"1. Install PostgreSQL",id:"1-install-postgresql",level:3},{value:"2. Create Database",id:"2-create-database",level:3},{value:"3. Configure Tududi",id:"3-configure-tududi",level:3},{value:"4. Run Migrations",id:"4-run-migrations",level:3},{value:"Database Migrations",id:"database-migrations",level:2},{value:"Check Migration Status",id:"check-migration-status",level:3},{value:"Run Pending Migrations",id:"run-pending-migrations",level:3},{value:"Create New Migration",id:"create-new-migration",level:3},{value:"Rollback Migration",id:"rollback-migration",level:3},{value:"Database Initialization",id:"database-initialization",level:2},{value:"Database Maintenance",id:"database-maintenance",level:2},{value:"Backup",id:"backup",level:3},{value:"Restore",id:"restore",level:3},{value:"Optimize",id:"optimize",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"database-setup",children:"Database Setup"})}),"\n",(0,a.jsx)(n.p,{children:"Configure and manage your Tududi database."}),"\n",(0,a.jsx)(n.h2,{id:"database-options",children:"Database Options"}),"\n",(0,a.jsx)(n.h3,{id:"sqlite-default",children:"SQLite (Default)"}),"\n",(0,a.jsx)(n.p,{children:"SQLite is the default database for Tududi - perfect for single-user installations or small teams."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Pros"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Zero configuration"}),"\n",(0,a.jsx)(n.li,{children:"No separate database server needed"}),"\n",(0,a.jsx)(n.li,{children:"File-based storage"}),"\n",(0,a.jsx)(n.li,{children:"Easy backups"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Cons"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Limited concurrent writes"}),"\n",(0,a.jsx)(n.li,{children:"Not ideal for high-traffic deployments"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"postgresql-optional",children:"PostgreSQL (Optional)"}),"\n",(0,a.jsx)(n.p,{children:"For larger deployments, PostgreSQL is recommended."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Pros"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Better concurrent access"}),"\n",(0,a.jsx)(n.li,{children:"Advanced features"}),"\n",(0,a.jsx)(n.li,{children:"Scalable for large teams"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Cons"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Requires separate database server"}),"\n",(0,a.jsx)(n.li,{children:"More complex setup"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"sqlite-setup",children:"SQLite Setup"}),"\n",(0,a.jsx)(n.p,{children:"SQLite is configured automatically. The database file is created at:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"./tududi.db\n"})}),"\n",(0,a.jsx)(n.h3,{id:"custom-location",children:"Custom Location"}),"\n",(0,a.jsxs)(n.p,{children:["Specify a custom location in ",(0,a.jsx)(n.code,{children:".env"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-env",children:"DATABASE_PATH=/path/to/your/tududi.db\n"})}),"\n",(0,a.jsx)(n.h2,{id:"postgresql-setup",children:"PostgreSQL Setup"}),"\n",(0,a.jsx)(n.h3,{id:"1-install-postgresql",children:"1. Install PostgreSQL"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Ubuntu/Debian\nsudo apt-get install postgresql postgresql-contrib\n\n# macOS\nbrew install postgresql\n"})}),"\n",(0,a.jsx)(n.h3,{id:"2-create-database",children:"2. Create Database"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo -u postgres psql\nCREATE DATABASE tududi;\nCREATE USER tududi_user WITH ENCRYPTED PASSWORD 'your_password';\nGRANT ALL PRIVILEGES ON DATABASE tududi TO tududi_user;\n\\q\n"})}),"\n",(0,a.jsx)(n.h3,{id:"3-configure-tududi",children:"3. Configure Tududi"}),"\n",(0,a.jsxs)(n.p,{children:["Update ",(0,a.jsx)(n.code,{children:".env"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-env",children:"DATABASE_URL=postgresql://tududi_user:your_password@localhost:5432/tududi\n"})}),"\n",(0,a.jsx)(n.h3,{id:"4-run-migrations",children:"4. Run Migrations"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm run db:migrate\n"})}),"\n",(0,a.jsx)(n.h2,{id:"database-migrations",children:"Database Migrations"}),"\n",(0,a.jsx)(n.h3,{id:"check-migration-status",children:"Check Migration Status"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm run migration:status\n"})}),"\n",(0,a.jsx)(n.h3,{id:"run-pending-migrations",children:"Run Pending Migrations"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm run migration:run\n"})}),"\n",(0,a.jsx)(n.h3,{id:"create-new-migration",children:"Create New Migration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm run migration:create -- --name add_user_avatar\n"})}),"\n",(0,a.jsx)(n.h3,{id:"rollback-migration",children:"Rollback Migration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm run migration:undo\n"})}),"\n",(0,a.jsx)(n.h2,{id:"database-initialization",children:"Database Initialization"}),"\n",(0,a.jsx)(n.p,{children:"First-time setup:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Initialize database\nnpm run db:init\n\n# Run migrations\nnpm run db:migrate\n\n# (Optional) Seed with sample data\nnpm run db:seed\n"})}),"\n",(0,a.jsx)(n.h2,{id:"database-maintenance",children:"Database Maintenance"}),"\n",(0,a.jsx)(n.h3,{id:"backup",children:"Backup"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# SQLite\ncp tududi.db tududi.db.backup\n\n# PostgreSQL\npg_dump -U tududi_user tududi > tududi_backup.sql\n"})}),"\n",(0,a.jsx)(n.h3,{id:"restore",children:"Restore"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# SQLite\ncp tududi.db.backup tududi.db\n\n# PostgreSQL\npsql -U tududi_user tududi < tududi_backup.sql\n"})}),"\n",(0,a.jsx)(n.h3,{id:"optimize",children:"Optimize"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# SQLite\nsqlite3 tududi.db "VACUUM;"\n\n# PostgreSQL\npsql -U tududi_user -d tududi -c "VACUUM ANALYZE;"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/guides/backup-restore",children:"Backup & Restore"})," - Backup strategies"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/guides/docker-deployment",children:"Docker Deployment"})," - Deploy with Docker"]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>r});var i=s(6540);const a={},t=i.createContext(a);function d(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);